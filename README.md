# Web магазин

### Последовательность запуска блоков ###
1. Docker - запустить docker-compose
2. Eureka - все rest сервисы обращаются к компонентам имени за счет eureka
3. Client
4. Storage
5. Payment
6. Надо зайти на http://localhost:18080/
administartion console -> login admin, pass admin -> realm sandbox -> Clients -> storage-app -> Credentials -> нажать Regenerate  скопировать Client Secret. После чего, вставить его в оба поля client-secret application.yml модуля storageAdmin. Затем создать в Users KCK пользователя. К сожалению, KCK перестал сохранять в выгружаемых настройках секрет и inmemory пользотвалей. Данная процедура нужна 1 раз при запуске. Лечится подключением KCK ко внешней базе данных. В разработке.
7. Загрузить storageAdmin
8. Графана http://localhost:3000 login - admin, pass - admin. Подключается к Prometheus


### Данный проект состоит из 6 модулей и делится на 3 основные части: ###

*Модули с представлением:*
1. Модуль client - клиентаская часть с каталогом товаров. Port: 8082
2. Модуль storageAdmin - администраnивное управление каталогом товаров.
   Port: 8083
3. Модули client и payment имеют статистику на основании Grafana и Prometheus. Port: 3000
4. Модули Eureka - технический модуль. Port:8761

*Rest api*

1. Модуль payment - учет покупок. Port 8081
2. Модуль storage - учет товаров. Port 8080


### Вход и регстрация в клиентскую часть ###

Осуществляеются по url http://localhost:8082/v3/users/login
Настроен Spring Security для регистрации и авторизации по средствам формы. 
Доступ к общему каталогу товаров разрешен для не аутентифицированных и не авторизованных пользователей при условии, что они знают свой id, пример(http://localhost:8082/v3/storage?id=2). Это связано с тем, что id - это атрибут сессии, необходимый для работы всей системы. Решение очень так себе, требуется переезд на jwt токены. В разработке

***Креденшлы***

Для входа можно воспользоваться уже заведенным в базу данных пользователем, к примеру: ***login - ivanov@gmail.com***, ***pass - 123*** или зарегитрироваться самостоятельно. После регистрации потребуется осуществить вход, при проведении операций с товарами. Логику повторной аутентияикации после регистрации надо изменить. В разработке

***Досутупные операции клиентской части***

1. CRUD для данных пользователя  http://localhost:8082/v3/users/**
2. Ведется учет количества забронированных товаров в корзине товаров
3. В личном кабинете отображаются купленные и забронированные товары
4. Доступен функционал покупки, бронирования, снятия с брони товаров
   http://localhost:8082/v3/storage**
5. Учет денежных операций ведется на уже заведенных в базу данных пользователях, т.к. окно подключения карты пока не готово. 
http://localhost:8082/v3/payment**

***Функционал frontend***

1. в headr доступен функционал на ссылках, в соотвествии с логикой названия: ЛК, Вход, Выход
2. В боковом меню работает фильтр товаров
3. доступны к использованию все ссылки на карточке товаров
4. товары выводятся в слайдере
5. написаны табы для переключения по разным типам описания товаров
6. создана возможность складывать/расскладывать боковое меню(toggle)
7. на экранах планшетов и ниже есть бургер меню
8. сделан адаптив на все ширины экранов

***Вход и регистрация в административную часть***

Для входа используется KCK и oauth2 аутентификация (см. пункт 6 "Последовательности запуска блоков" )

***Досутупные операции административной части***

1. CRUD для данных товаров  http://localhost:8083/v4**
2. Ведется учет количества забронированных товаров, остаток на складе 
3. Есть возжможность бронирования, снятия с брони товаров
   http://localhost:8083/v4/{id}/unreservation** http://localhost:8083/v4/{id}/reservation**





